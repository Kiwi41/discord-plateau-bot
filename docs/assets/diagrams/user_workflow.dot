digraph user_workflow {
    rankdir=TB;
    bgcolor="white";
    
    // Styling
    node [shape=box, style=filled, fontname="Arial", fontsize=10];
    edge [fontname="Arial", fontsize=9, color="#666666"];
    
    // User actions
    subgraph cluster_user {
        label="ğŸ‘¤ Actions utilisateur";
        style=filled;
        fillcolor="#e8f4ff";
        
        create_event [label="ğŸ“… CrÃ©er Ã©vÃ©nement\nDiscord (vendredi)", fillcolor="#b3d9ff"];
        manual_cmd [label="âŒ¨ï¸ Commande manuelle\n(!create-plateau-post)", fillcolor="#b3d9ff"];
        check_post [label="ğŸ‘€ VÃ©rifier le post\ncrÃ©Ã© dans le forum", fillcolor="#b3d9ff"];
    }
    
    // Automatic processes
    subgraph cluster_auto {
        label="ğŸ¤– Processus automatiques";
        style=filled;
        fillcolor="#f0f8f0";
        
        schedule [label="â° Planificateur\n(samedi 3h00)", fillcolor="#c8e6c9"];
        fetch_events [label="ğŸ” Recherche Ã©vÃ©nements\n(mots-clÃ©s: plateau, soirÃ©e)", fillcolor="#c8e6c9"];
        process_fridays [label="ğŸ“‹ Traitement\n4 prochains vendredis", fillcolor="#c8e6c9"];
    }
    
    // Bot decisions
    subgraph cluster_decision {
        label="ğŸ§  Logique du bot";
        style=filled;
        fillcolor="#fff8e1";
        
        event_found [label="â“ Ã‰vÃ©nement trouvÃ©\npour ce vendredi ?", 
                    shape=diamond, fillcolor="#ffeb3b"];
        post_exists [label="â“ Post dÃ©jÃ  existant\ndans le forum ?", 
                    shape=diamond, fillcolor="#ffeb3b"];
        needs_update [label="â“ Infos diffÃ©rentes\n(heure, lieu, desc) ?", 
                     shape=diamond, fillcolor="#ffeb3b"];
    }
    
    // Bot actions
    subgraph cluster_bot_actions {
        label="âš¡ Actions du bot";
        style=filled;
        fillcolor="#fce4ec";
        
        create_post [label="ğŸ“ CrÃ©er nouveau post\navec infos Ã©vÃ©nement", fillcolor="#f8bbd9"];
        update_post [label="ğŸ”„ Mettre Ã  jour\npost existant", fillcolor="#f8bbd9"];
        default_post [label="ğŸ“ CrÃ©er post\navec valeurs par dÃ©faut", fillcolor="#f8bbd9"];
        no_action [label="âœ… Rien Ã  faire\npost dÃ©jÃ  Ã  jour", fillcolor="#f8bbd9"];
    }
    
    // Results
    forum_post [label="ğŸ¯ Post dans le forum\navec toutes les infos", 
               shape=ellipse, fillcolor="#4caf50", fontcolor="white"];
    
    // Automatic flow
    schedule -> fetch_events -> process_fridays -> event_found;
    
    // Manual flow
    create_event -> manual_cmd -> event_found;
    
    // Decision flow
    event_found -> post_exists [label="âœ… Oui"];
    event_found -> default_post [label="âŒ Non"];
    
    post_exists -> needs_update [label="âœ… Oui"];
    post_exists -> create_post [label="âŒ Non"];
    
    needs_update -> update_post [label="âœ… Oui"];
    needs_update -> no_action [label="âŒ Non"];
    
    // Final results
    create_post -> forum_post;
    update_post -> forum_post;
    default_post -> forum_post;
    no_action -> check_post;
    
    forum_post -> check_post [label="ğŸ”” Notification"];
    
    // Feedback loop
    check_post -> create_event [label="ğŸ“… PrÃ©parer\nprochain vendredi", style=dashed];
}